import{r,j as e,S as j}from"./index-BdVTcDul.js";import{g as f}from"./common-DSNPT3jt.js";import{F as i}from"./Table-BBhwPCwl.js";import{T as s}from"./index-BcGmPhu8.js";import"./request-KJyQ3YrS.js";import"./index-DyDWlBm7.js";const D=()=>{const[n,p]=r.useState(),[l,u]=r.useState(0),[y,m]=r.useState(),x=async()=>{const t=await f("io/knife-tool/report/polish");p(t),u(t[0].supplierId)};r.useEffect(()=>{x()},[]),r.useEffect(()=>{var t;m((t=n==null?void 0:n.find(a=>a.supplierId===l))==null?void 0:t.tools)},[n,l]);const c=[{title:"刀具",dataIndex:"name",key:"name",width:100},{title:"修磨收回",dataIndex:"inQuantity",key:"inQuantity",width:100,sorter:(t,a)=>t.inQuantity-a.inQuantity},{title:"修磨发出",dataIndex:"outQuantity",key:"outQuantity",width:100,sorter:(t,a)=>t.outQuantity-a.outQuantity},{title:"修磨报废",dataIndex:"scrapQuantity",key:"scrapQuantity",width:100,sorter:(t,a)=>t.scrapQuantity-a.scrapQuantity},{title:"欠",dataIndex:"remainingQuantity",key:"remainingQuantity",width:100,sorter:(t,a)=>t.remainingQuantity-a.remainingQuantity}];return e.jsxs(e.Fragment,{children:[e.jsx(j,{options:n==null?void 0:n.map(t=>({label:t.supplierName,value:t.supplierId})),value:l,onChange:t=>u(t)}),e.jsx("div",{style:{marginTop:24}}),e.jsx(i,{columns:c,dataSource:y,pagination:!1,rowKey:"code",summary:t=>{let a=0,o=0,d=0;return t.forEach(({outQuantity:h,inQuantity:Q,scrapQuantity:g})=>{a+=h,o+=Q,d+=g}),e.jsx(e.Fragment,{children:e.jsxs(i.Summary.Row,{children:[e.jsx(i.Summary.Cell,{index:0,children:e.jsx(s.Text,{type:"danger",children:"合计"})}),e.jsx(i.Summary.Cell,{index:1,children:e.jsx(s.Text,{type:"danger",children:o})}),e.jsx(i.Summary.Cell,{index:2,children:e.jsx(s.Text,{type:"danger",children:a})}),e.jsx(i.Summary.Cell,{index:3,children:e.jsx(s.Text,{type:"danger",children:d})}),e.jsx(i.Summary.Cell,{index:4,children:e.jsx(s.Text,{type:"danger",children:a-o-d})})]})})}})]})};export{D as default};
