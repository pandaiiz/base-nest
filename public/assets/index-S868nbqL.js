import{r as n,C as B,t as p,v as ye,w as $e,x as fe,y as o,z as P,G as _,H as ve,T as Se,I as xe,J as Ce,N as Oe,u as je,j as h,M as ze,P as W,a as A,A as D}from"./index-C-g3yOAE.js";import{T as we}from"./index-BsOYpZyI.js";import{P as Pe}from"./index-BWOfSK86.js";import{P as Te}from"./index-DyJY3l44.js";var Ee=function(e,a){var i={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(i[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(i[t[r]]=e[t[r]]);return i};const Ne=e=>{var{prefixCls:a,className:i,hoverable:t=!0}=e,r=Ee(e,["prefixCls","className","hoverable"]);const{getPrefixCls:s}=n.useContext(B),c=s("card",a),g=p(`${c}-grid`,i,{[`${c}-grid-hoverable`]:t});return n.createElement("div",Object.assign({},r,{className:g}))},q=Ne,Be=e=>{const{antCls:a,componentCls:i,headerHeight:t,cardPaddingBase:r,tabsMarginBottom:s}=e;return Object.assign(Object.assign({display:"flex",justifyContent:"center",flexDirection:"column",minHeight:t,marginBottom:-1,padding:`0 ${o(r)}`,color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.headerFontSize,background:e.headerBg,borderBottom:`${o(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`,borderRadius:`${o(e.borderRadiusLG)} ${o(e.borderRadiusLG)} 0 0`},P()),{"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":Object.assign(Object.assign({display:"inline-block",flex:1},_),{[`
          > ${i}-typography,
          > ${i}-typography-edit-content
        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}}),[`${a}-tabs-top`]:{clear:"both",marginBottom:s,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,"&-bar":{borderBottom:`${o(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`}}})},Me=e=>{const{cardPaddingBase:a,colorBorderSecondary:i,cardShadow:t,lineWidth:r}=e;return{width:"33.33%",padding:a,border:0,borderRadius:0,boxShadow:`
      ${o(r)} 0 0 0 ${i},
      0 ${o(r)} 0 0 ${i},
      ${o(r)} ${o(r)} 0 0 ${i},
      ${o(r)} 0 0 0 ${i} inset,
      0 ${o(r)} 0 0 ${i} inset;
    `,transition:`all ${e.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:t}}},Re=e=>{const{componentCls:a,iconCls:i,actionsLiMargin:t,cardActionsIconSize:r,colorBorderSecondary:s,actionsBg:c}=e;return Object.assign(Object.assign({margin:0,padding:0,listStyle:"none",background:c,borderTop:`${o(e.lineWidth)} ${e.lineType} ${s}`,display:"flex",borderRadius:`0 0 ${o(e.borderRadiusLG)} ${o(e.borderRadiusLG)}`},P()),{"& > li":{margin:t,color:e.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:e.calc(e.cardActionsIconSize).mul(2).equal(),fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimary,transition:`color ${e.motionDurationMid}`},[`a:not(${a}-btn), > ${i}`]:{display:"inline-block",width:"100%",color:e.colorTextDescription,lineHeight:o(e.fontHeight),transition:`color ${e.motionDurationMid}`,"&:hover":{color:e.colorPrimary}},[`> ${i}`]:{fontSize:r,lineHeight:o(e.calc(r).mul(e.lineHeight).equal())}},"&:not(:last-child)":{borderInlineEnd:`${o(e.lineWidth)} ${e.lineType} ${s}`}}})},Ge=e=>Object.assign(Object.assign({margin:`${o(e.calc(e.marginXXS).mul(-1).equal())} 0`,display:"flex"},P()),{"&-avatar":{paddingInlineEnd:e.padding},"&-detail":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:e.marginXS}},"&-title":Object.assign({color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG},_),"&-description":{color:e.colorTextDescription}}),He=e=>{const{componentCls:a,cardPaddingBase:i,colorFillAlter:t}=e;return{[`${a}-head`]:{padding:`0 ${o(i)}`,background:t,"&-title":{fontSize:e.fontSize}},[`${a}-body`]:{padding:`${o(e.padding)} ${o(i)}`}}},Ie=e=>{const{componentCls:a}=e;return{overflow:"hidden",[`${a}-body`]:{userSelect:"none"}}},Le=e=>{const{componentCls:a,cardShadow:i,cardHeadPadding:t,colorBorderSecondary:r,boxShadowTertiary:s,cardPaddingBase:c,extraColor:g}=e;return{[a]:Object.assign(Object.assign({},fe(e)),{position:"relative",background:e.colorBgContainer,borderRadius:e.borderRadiusLG,[`&:not(${a}-bordered)`]:{boxShadow:s},[`${a}-head`]:Be(e),[`${a}-extra`]:{marginInlineStart:"auto",color:g,fontWeight:"normal",fontSize:e.fontSize},[`${a}-body`]:Object.assign({padding:c,borderRadius:`0 0 ${o(e.borderRadiusLG)} ${o(e.borderRadiusLG)}`},P()),[`${a}-grid`]:Me(e),[`${a}-cover`]:{"> *":{display:"block",width:"100%",borderRadius:`${o(e.borderRadiusLG)} ${o(e.borderRadiusLG)} 0 0`}},[`${a}-actions`]:Re(e),[`${a}-meta`]:Ge(e)}),[`${a}-bordered`]:{border:`${o(e.lineWidth)} ${e.lineType} ${r}`,[`${a}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${a}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${e.motionDurationMid}, border-color ${e.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:i}},[`${a}-contain-grid`]:{borderRadius:`${o(e.borderRadiusLG)} ${o(e.borderRadiusLG)} 0 0 `,[`${a}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${a}-loading) ${a}-body`]:{marginBlockStart:e.calc(e.lineWidth).mul(-1).equal(),marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),padding:0}},[`${a}-contain-tabs`]:{[`> div${a}-head`]:{minHeight:0,[`${a}-head-title, ${a}-extra`]:{paddingTop:t}}},[`${a}-type-inner`]:He(e),[`${a}-loading`]:Ie(e),[`${a}-rtl`]:{direction:"rtl"}}},We=e=>{const{componentCls:a,cardPaddingSM:i,headerHeightSM:t,headerFontSizeSM:r}=e;return{[`${a}-small`]:{[`> ${a}-head`]:{minHeight:t,padding:`0 ${o(i)}`,fontSize:r,[`> ${a}-head-wrapper`]:{[`> ${a}-extra`]:{fontSize:e.fontSize}}},[`> ${a}-body`]:{padding:i}},[`${a}-small${a}-contain-tabs`]:{[`> ${a}-head`]:{[`${a}-head-title, ${a}-extra`]:{paddingTop:0,display:"flex",alignItems:"center"}}}}},Ae=e=>({headerBg:"transparent",headerFontSize:e.fontSizeLG,headerFontSizeSM:e.fontSize,headerHeight:e.fontSizeLG*e.lineHeightLG+e.padding*2,headerHeightSM:e.fontSize*e.lineHeight+e.paddingXS*2,actionsBg:e.colorBgContainer,actionsLiMargin:`${e.paddingSM}px 0`,tabsMarginBottom:-e.padding-e.lineWidth,extraColor:e.colorText}),De=ye("Card",e=>{const a=$e(e,{cardShadow:e.boxShadowCard,cardHeadPadding:e.padding,cardPaddingBase:e.paddingLG,cardActionsIconSize:e.fontSize,cardPaddingSM:12});return[Le(a),We(a)]},Ae);var F=function(e,a){var i={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(i[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(i[t[r]]=e[t[r]]);return i};const Fe=e=>{const{actionClasses:a,actions:i=[],actionStyle:t}=e;return n.createElement("ul",{className:a,style:t},i.map((r,s)=>{const c=`action-${s}`;return n.createElement("li",{style:{width:`${100/i.length}%`},key:c},n.createElement("span",null,r))}))},_e=n.forwardRef((e,a)=>{const{prefixCls:i,className:t,rootClassName:r,style:s,extra:c,headStyle:g={},bodyStyle:m={},title:y,loading:x,bordered:C=!0,size:O,type:j,cover:R,actions:z,tabList:v,children:w,activeTabKey:G,defaultActiveTabKey:K,tabBarExtraContent:V,hoverable:X,tabProps:J={},classNames:T,styles:E}=e,U=F(e,["prefixCls","className","rootClassName","style","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps","classNames","styles"]),{getPrefixCls:Y,direction:Q,card:u}=n.useContext(B),Z=b=>{var l;(l=e.onTabChange)===null||l===void 0||l.call(e,b)},$=b=>{var l;return p((l=u==null?void 0:u.classNames)===null||l===void 0?void 0:l[b],T==null?void 0:T[b])},f=b=>{var l;return Object.assign(Object.assign({},(l=u==null?void 0:u.styles)===null||l===void 0?void 0:l[b]),E==null?void 0:E[b])},k=n.useMemo(()=>{let b=!1;return n.Children.forEach(w,l=>{(l==null?void 0:l.type)===q&&(b=!0)}),b},[w]),d=Y("card",i),[ee,ae,te]=De(d),re=n.createElement(Ce,{loading:!0,active:!0,paragraph:{rows:4},title:!1},w),H=G!==void 0,ie=Object.assign(Object.assign({},J),{[H?"activeKey":"defaultActiveKey"]:H?G:K,tabBarExtraContent:V});let I;const S=ve(O),oe=!S||S==="default"?"large":S,L=v?n.createElement(Se,Object.assign({size:oe},ie,{className:`${d}-head-tabs`,onChange:Z,items:v.map(b=>{var{tab:l}=b,N=F(b,["tab"]);return Object.assign({label:l},N)})})):null;if(y||c||L){const b=p(`${d}-head`,$("header")),l=p(`${d}-head-title`,$("title")),N=p(`${d}-extra`,$("extra")),he=Object.assign(Object.assign({},g),f("header"));I=n.createElement("div",{className:b,style:he},n.createElement("div",{className:`${d}-head-wrapper`},y&&n.createElement("div",{className:l,style:f("title")},y),c&&n.createElement("div",{className:N,style:f("extra")},c)),L)}const ne=p(`${d}-cover`,$("cover")),se=R?n.createElement("div",{className:ne,style:f("cover")},R):null,le=p(`${d}-body`,$("body")),de=Object.assign(Object.assign({},m),f("body")),ce=n.createElement("div",{className:le,style:de},x?re:w),ge=p(`${d}-actions`,$("actions")),me=z!=null&&z.length?n.createElement(Fe,{actionClasses:ge,actionStyle:f("actions"),actions:z}):null,be=xe(U,["onTabChange"]),ue=p(d,u==null?void 0:u.className,{[`${d}-loading`]:x,[`${d}-bordered`]:C,[`${d}-hoverable`]:X,[`${d}-contain-grid`]:k,[`${d}-contain-tabs`]:v==null?void 0:v.length,[`${d}-${S}`]:S,[`${d}-type-${j}`]:!!j,[`${d}-rtl`]:Q==="rtl"},t,r,ae,te),pe=Object.assign(Object.assign({},u==null?void 0:u.style),s);return ee(n.createElement("div",Object.assign({ref:a},be,{className:ue,style:pe}),I,se,ce,me))}),qe=_e;var Ke=function(e,a){var i={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.indexOf(t)<0&&(i[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(e);r<t.length;r++)a.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(e,t[r])&&(i[t[r]]=e[t[r]]);return i};const Ve=e=>{const{prefixCls:a,className:i,avatar:t,title:r,description:s}=e,c=Ke(e,["prefixCls","className","avatar","title","description"]),{getPrefixCls:g}=n.useContext(B),m=g("card",a),y=p(`${m}-meta`,i),x=t?n.createElement("div",{className:`${m}-meta-avatar`},t):null,C=r?n.createElement("div",{className:`${m}-meta-title`},r):null,O=s?n.createElement("div",{className:`${m}-meta-description`},s):null,j=C||O?n.createElement("div",{className:`${m}-meta-detail`},C,O):null;return n.createElement("div",Object.assign({},c,{className:y}),x,j)},Xe=Ve,M=qe;M.Grid=q;M.Meta=Xe;const Je=M,ke=Oe.create(({data:e,type:a="add",treeData:i=[]})=>{const t=(e==null?void 0:e.menuIds)||[],r=je(),s=n.useRef(),c=async()=>{var m,y;const g=await((y=(m=s.current)==null?void 0:m.validateFields)==null?void 0:y.call(m));a==="add"?await D.systemRole.roleCreate(g):await D.systemRole.roleUpdate({id:e.id},g),r.resolve(g)};return h.jsx(ze,{title:a==="add"?"新增":"编辑",open:r.visible,onOk:c,onCancel:r.remove,maskClosable:!1,children:h.jsxs(W,{formRef:s,initialValues:e||{status:1},labelCol:{span:6},wrapperCol:{span:16},submitter:!1,layout:"horizontal",children:[h.jsx(A,{rules:[{required:!0}],name:"name",label:"角色名称"}),h.jsx(A,{rules:[{required:!0}],name:"value",label:"角色值"}),h.jsx(Pe.Group,{name:"status",label:"状态",options:[{label:"启用",value:1},{label:"禁用",value:0}]}),h.jsx(Te,{name:"remark",label:"备注"}),h.jsx(W.Item,{label:"菜单权限",name:"menuIds",children:h.jsx(Je,{style:{maxHeight:200,overflowY:"auto",padding:0},children:h.jsx(we,{checkable:!0,checkStrictly:!0,defaultExpandAll:!0,onCheck:g=>{var m;(m=s.current)==null||m.setFieldValue("menuIds",g==null?void 0:g.checked)},defaultCheckedKeys:t,fieldNames:{title:"name",key:"id"},treeData:i})})})]})})});export{ke as default};
