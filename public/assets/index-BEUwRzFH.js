import{cB as l,N as d,u as p,r as c,j as s,P as f,a as t}from"./index-BdVTcDul.js";import{d as b,r as x}from"./systemDept-DhqNZY_f.js";import{M as v}from"./index-BVe2A3rK.js";import{P as n}from"./index-CJ-3cW7g.js";import{P}from"./index-CmytMqWs.js";import{P as j}from"./index-BXxGmVdb.js";async function z(e){return l.get("/system/users",{params:{page:"1",pageSize:"10",...e}})}async function g(e){return l.post("/system/users",e)}async function C(e){const{id:r,...a}=e;return l.get(`/system/users/${r}`,{params:{...a}})}async function y(e,r){return l.put(`/system/users/${e}`,r)}const h=d.create(({data:e,type:r="add"})=>{const a=p(),u=c.useRef(),m=async()=>{var i;const o=await((i=u.current)==null?void 0:i.validateFields());if(o.avatar=o.avatar[0].response.data.filename,r==="add")await g(o);else if(e!=null&&e.id)await y(e.id,o);else throw new Error("Invalid user ID for update");a.resolve(!0)};return s.jsx(v,{title:r==="add"?"新增":"编辑",open:a.visible,onOk:m,onCancel:a.remove,maskClosable:!1,children:s.jsxs(f,{formRef:u,initialValues:{...e,status:(e==null?void 0:e.status)??1},labelCol:{span:6},wrapperCol:{span:16},submitter:!1,layout:"horizontal",children:[s.jsx(n,{rules:[{required:!0,message:"请选择所属部门"}],name:"deptId",label:"所属部门",request:()=>b({pageSize:-1}),fieldProps:{fieldNames:{value:"id",label:"name"},showSearch:!0}}),s.jsx(n,{rules:[{required:!0,type:"array",min:1,message:"请选择所属角色"}],name:"roleIds",label:"所属角色",request:()=>x({pageSize:-1}),fieldProps:{mode:"multiple",fieldNames:{value:"id",label:"name"},showSearch:!0}}),s.jsx(t,{rules:[{required:!0,message:"请输入用户名"}],name:"username",label:"用户名"}),s.jsx(t.Password,{rules:[{required:r==="add",message:"请输入密码"}],name:"password",label:"密码",placeholder:r==="edit"?"不修改请留空":void 0}),s.jsx(t,{name:"nickname",label:"昵称"}),s.jsx(P,{name:"remark",label:"备注"}),s.jsx(j.Group,{name:"status",label:"状态",options:[{label:"启用",value:1},{label:"禁用",value:0}]})]})})}),R=Object.freeze(Object.defineProperty({__proto__:null,default:h},Symbol.toStringTag,{value:"Module"}));export{h as U,C as a,R as i,z as u};
