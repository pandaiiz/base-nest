import{u,r as m,j as c,cr as d,B as l,A as a,E as p,M as y}from"./index-C-g3yOAE.js";import{baseColumns as x}from"./columns-D87jy7s1.js";import f from"./index-DVSVWYT1.js";import{P as h}from"./Table-OlwSqMJK.js";import"./dateUtil-BnlWTJph.js";import"./index-B3SaLqtB.js";import"./index-CdynWnC0.js";import"./index-DyJY3l44.js";import"./index-BWOfSK86.js";import"./index-CmPvz_FA.js";import"./index-BsOYpZyI.js";const{confirm:w}=y,C=(e,t)=>{w({title:"确认删除吗？",icon:c.jsx(p,{}),content:"删除后不可恢复！",onOk(){a.systemUser.userDelete({id:e.id}).then(()=>t.current.reload())}})},j=async(e,t)=>{var s;const o=await a.systemMenu.menuList({}),i=await e.show({treeData:o});try{await a.systemUser.userCreate(i),e.remove(),(s=t.current)==null||s.reload()}catch{}},k=async(e,t,o)=>{var n;const i=await a.systemMenu.menuList({}),s=await a.systemUser.userRead({id:t.id}),r=await e.show({data:s,treeData:i,type:"edit"});try{await a.systemUser.userUpdate({id:t.id},r),e.remove(),(n=o.current)==null||n.reload()}catch{}},F=()=>{const e=u(f),t=m.useRef(),o=[...x,{title:"操作",valueType:"option",key:"option",align:"center",width:160,fixed:"right",render:(s,r)=>[c.jsx(l,{type:"link",onClick:()=>k(e,r,t),children:"编辑"},"edit"),c.jsx(l,{type:"link",onClick:()=>C(r,t),children:"删除"},"delete")]}],i=m.useRef();return c.jsx(h,{headerTitle:"用户列表",onDataSourceChange:s=>{i.current=s},columns:o,actionRef:t,request:async s=>{var n;const r=await d(s);return{data:r.list,success:!0,total:(n=r.pagination)==null?void 0:n.total}},rowKey:"id",columnEmptyText:!1,dateFormatter:"string",scroll:{y:800},toolBarRender:()=>[c.jsx(l,{type:"primary",onClick:()=>j(e,t),children:"新增"},"primary")]})};export{F as default};
