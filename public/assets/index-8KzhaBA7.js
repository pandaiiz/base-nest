import{N as c,u as b,r as h,j as s,D as x,S as f,B as j,P as v,a as u}from"./index-C-g3yOAE.js";import{g as i,a as g,u as y}from"./common-Ba1hFKtc.js";import{operationTypes as F}from"./columns-CviHIvVd.js";import{P as n}from"./index-CdynWnC0.js";import{P}from"./index-hJJE_L4a.js";import"./dateUtil-BnlWTJph.js";const E=c.create(({data:d,type:m="add"})=>{const o=b(),t=h.useRef(),p=async a=>{var r,l;const e=await((l=(r=t.current)==null?void 0:r.validateFields)==null?void 0:l.call(r));m==="add"?await g("relationship/tool",{...e,operationType:a}):await y("relationship/tool",{id:d.id},{...e,operationType:a}),o.resolve(e)};return s.jsx(x,{placement:"bottom",title:m==="add"?"新增":"编辑",open:o.visible,height:"100%",onClose:o.remove,maskClosable:!1,footer:s.jsx(f,{style:{float:"right"},children:F.map(a=>s.jsx(j,{onClick:()=>p(a.value),type:a.type==="primary"?"primary":"dashed",children:a.label},a.value))}),children:s.jsxs(v,{formRef:t,initialValues:d||{status:1},labelCol:{span:6},wrapperCol:{span:16},submitter:!1,layout:"horizontal",children:[s.jsx(n,{name:"name",label:"刀具名称",rules:[{required:!0}],request:()=>i("system/dict-item/by-dict-code",{dictCode:"KNIFE_TOOL"}),onChange:(a,e)=>{var r,l;(r=t.current)==null||r.setFieldsValue({name:e.label}),(l=t.current)==null||l.setFieldsValue({code:e.value})}}),s.jsx(u,{name:"code",label:"刀具代码",hidden:!0}),s.jsx(n,{name:"supplierId",label:"供应商",rules:[{required:!0}],request:async()=>(await i("relationship/supplier",{pageSize:-1})).map(e=>({label:e.name,value:e.id}))}),s.jsx(P,{name:"quantity",label:"件数",rules:[{required:!0,message:"请输入件数"}],min:1,fieldProps:{precision:0}}),s.jsx(n,{name:"receiverId",label:"登记人员",request:async()=>(await i("relationship/employee",{pageSize:-1})).map(e=>({label:e.name,value:e.id}))}),s.jsx(u,{name:"remark",label:"备注"})]})})});export{E as EditModal};
